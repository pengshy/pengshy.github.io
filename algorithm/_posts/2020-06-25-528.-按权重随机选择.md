---
layout: post
title: 528. 按权重随机选择
description: >
  https://leetcode.cn/problems/random-pick-with-weight/
categories: [algorithm]
tags: [binary-search]
sitemap: false
hide_last_modified: true

---

#### 前缀和 + 二分查找，设数组$$ w $$的权重之和为$$ total $$，根据题目的要求，我们可以看成将$$  [1, total] $$范围内的所有整数分成$$ n $$个部分，第$$ i $$个部分恰好包含$$ w[i] $$个整数，并且这$$ n $$个部分两两的交集为空。随后我们在$$ [1, total]$$方位内随机选择一个整数$$ x $$，如果整数$$ x $$被包含在第$$ i $$个部分内，就返回$$ i $$

```c++
class Solution {
private:
    mt19937 gen;
    uniform_int_distribution<int> dis;
    vector<int> pre;

public:
    Solution(vector<int>& w): gen(random_device{}()), dis(1, accumulate(w.begin(), w.end(), 0)) {
        partial_sum(w.begin(), w.end(), back_inserter(pre));
    }
    
    int pickIndex() {
        int x = dis(gen);
        return lower_bound(pre.begin(), pre.end(), x) - pre.begin();
    }
};
```

#### 时间复杂度：$$ O(n) $$ 

#### 空间复杂度：$$ O(1) $$

